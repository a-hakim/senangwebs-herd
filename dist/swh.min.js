!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SWH=e():t.SWH=e()}(this,()=>{return t={},(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function a(t,e,a){return(e=i(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function n(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function i(e){var a=function(e,a){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,a||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(e,"string");return"symbol"==t(a)?a:a+""}!function(t){"use strict";var i=function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!(e.container&&e.container instanceof HTMLElement))throw new Error("SWH: container element is required");if(!(e.tabsContainer&&e.tabsContainer instanceof HTMLElement))throw new Error("SWH: tabsContainer element is required");if(!(e.contentContainer&&e.contentContainer instanceof HTMLElement))throw new Error("SWH: contentContainer element is required");this.config={container:e.container,tabsContainer:e.tabsContainer,contentContainer:e.contentContainer,presetTabs:e.presetTabs||[],storageKey:e.storageKey||"swh-tabs",defaultTab:e.defaultTab||null,allowClose:e.allowClose||!1,maxTabs:e.maxTabs||1/0},this.state={openTabs:[],activeTabId:null,tabElements:new Map,iframeElements:new Map},this.events=new Map,this.init()},i=[{key:"init",value:function(){var t=this;!this.restoreState()&&this.config.presetTabs.length>0&&(this.config.presetTabs.forEach(function(e){t.openTab(e.id,e.title,e.url)}),this.config.defaultTab?this.switchTab(this.config.defaultTab):this.config.presetTabs.length>0&&this.switchTab(this.config.presetTabs[0].id))}},{key:"openTab",value:function(t,e,a){if(!t||"string"!=typeof t)return!1;if(this.state.openTabs.find(function(e){return e.id===t}))return this.switchTab(t),!1;if(this.state.openTabs.length>=this.config.maxTabs)return this.emit("maxTabsReached",{maxTabs:this.config.maxTabs}),!1;var n=this.createTabButton(t,e),i=this.createIframe(t,a);return this.state.openTabs.push({id:t,title:e,url:a,loaded:!1}),this.state.tabElements.set(t,n),this.state.iframeElements.set(t,i),this.config.tabsContainer.appendChild(n),this.config.contentContainer.appendChild(i),this.persistState(),this.emit("tabOpened",{id:t,title:e,url:a}),!0}},{key:"createTabButton",value:function(t,e){var a=this,n=document.createElement("button");if(n.className="swh-tab",n.setAttribute("data-swh-tab",t),n.textContent=e,n.addEventListener("click",function(e){e.preventDefault(),a.switchTab(t)}),this.config.allowClose){var i=document.createElement("span");i.className="swh-tab-close",i.innerHTML="&times;",i.setAttribute("title","Close tab"),i.addEventListener("click",function(e){e.stopPropagation(),a.closeTab(t)}),n.appendChild(i)}return n}},{key:"createIframe",value:function(t,e){var a=this,n=document.createElement("iframe");return n.className="swh-iframe",n.setAttribute("data-swh-iframe",t),n.setAttribute("data-url",e),n.style.display="none",n.addEventListener("load",function(){if(n.getAttribute("src")){var e=a.state.openTabs.find(function(e){return e.id===t});e&&(e.loaded=!0,a.emit("tabLoaded",{id:t}))}}),n}},{key:"switchTab",value:function(t){var e=this.state.openTabs.find(function(e){return e.id===t});if(!e)return!1;var a=this.state.tabElements.get(t),n=this.state.iframeElements.get(t);if(!a||!n)return!1;if(this.state.activeTabId){var i=this.state.tabElements.get(this.state.activeTabId),r=this.state.iframeElements.get(this.state.activeTabId);i&&i.classList.remove("active"),r&&(r.style.display="none")}return a.classList.add("active"),n.style.display="block",e.loaded||n.getAttribute("src")||(n.src=e.url),this.state.activeTabId=t,this.persistState(),this.emit("tabSwitched",{id:t,tab:e}),!0}},{key:"closeTab",value:function(t){if(this.state.openTabs.length<=1)return!1;var e=this.state.openTabs.findIndex(function(e){return e.id===t});if(-1===e)return!1;var a=this.state.tabElements.get(t),n=this.state.iframeElements.get(t);if(a&&a.parentNode&&a.parentNode.removeChild(a),n&&n.parentNode&&n.parentNode.removeChild(n),this.state.openTabs.splice(e,1),this.state.tabElements.delete(t),this.state.iframeElements.delete(t),this.state.activeTabId===t){var i=Math.max(0,e-1),r=this.state.openTabs[i];r&&this.switchTab(r.id)}return this.persistState(),this.emit("tabClosed",{id:t}),!0}},{key:"reloadTab",value:function(t){var e=this.state.openTabs.find(function(e){return e.id===t}),a=this.state.iframeElements.get(t);return!(!e||!a||(e.loaded=!1,a.src?a.src=a.src:a.src=e.url,0))}},{key:"getOpenTabs",value:function(){return this.state.openTabs.map(function(t){return function(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?e(Object(i),!0).forEach(function(e){a(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}({},t)})}},{key:"getActiveTab",value:function(){return this.state.activeTabId}},{key:"clearTabs",value:function(){for(var t=this.state.openTabs.map(function(t){return t.id}),e=t.length-1;e>0;e--)this.closeTab(t[e]);try{localStorage.removeItem(this.config.storageKey)}catch(t){}}},{key:"persistState",value:function(){try{var t={openTabs:this.state.openTabs,activeTabId:this.state.activeTabId};localStorage.setItem(this.config.storageKey,JSON.stringify(t))}catch(t){}}},{key:"restoreState",value:function(){var t=this;try{var e=localStorage.getItem(this.config.storageKey);if(!e)return!1;var a=JSON.parse(e);return!(!a||!Array.isArray(a.openTabs)||0===a.openTabs.length||(a.openTabs.forEach(function(e){t.openTab(e.id,e.title,e.url)}),a.activeTabId&&this.switchTab(a.activeTabId),0))}catch(t){return!1}}},{key:"on",value:function(t,e){"function"==typeof e&&(this.events.has(t)||this.events.set(t,[]),this.events.get(t).push(e))}},{key:"off",value:function(t,e){if(this.events.has(t)){var a=this.events.get(t),n=a.indexOf(e);n>-1&&a.splice(n,1)}}},{key:"emit",value:function(t,e){this.events.has(t)&&this.events.get(t).forEach(function(t){try{t(e)}catch(t){}})}}],i&&n(t.prototype,i),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,r}();function r(){document.querySelectorAll("[data-swh]").forEach(function(t){var e={container:t,tabsContainer:t.querySelector("[data-swh-tabs]"),contentContainer:t.querySelector("[data-swh-content]"),storageKey:t.getAttribute("data-swh-storage-key")||"swh-tabs",defaultTab:t.getAttribute("data-swh-default-tab")||null,allowClose:t.hasAttribute("data-swh-allow-close"),maxTabs:parseInt(t.getAttribute("data-swh-max-tabs"))||1/0},a=[];t.querySelectorAll("[data-swh-tab]").forEach(function(e){var n=e.getAttribute("data-swh-tab"),i=e.textContent.trim(),r=t.querySelector('[data-swh-iframe="'.concat(n,'"]'));if(r){var s=r.getAttribute("data-url")||r.getAttribute("src")||"";a.push({id:n,title:i,url:s}),e.parentNode.removeChild(e),r.parentNode.removeChild(r)}}),e.presetTabs=a;var n=new i(e);t._swhInstance=n})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",r):r(),t.SWH=i}(window)})(),t=t.default;var t});
//# sourceMappingURL=swh.min.js.map