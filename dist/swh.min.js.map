{"version":3,"file":"swh.min.js","mappings":"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","sources":["webpack://SWH/webpack/universalModuleDefinition","webpack://SWH/./src/js/swh.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"SWH\"] = factory();\n\telse\n\t\troot[\"SWH\"] = factory();\n})(this, () => {\nreturn ","/**\r\n * SenangWebs Herd (SWH)\r\n * A lightweight library for managing multiple HTML files within a single page using tabs and lazy-loaded iframes.\r\n * @version 1.0.0\r\n */\r\n\r\n(function(window) {\r\n    'use strict';\r\n\r\n    /**\r\n     * SWH Constructor\r\n     * @param {Object} config - Configuration options\r\n     * @param {HTMLElement} config.container - The container element for SWH\r\n     * @param {HTMLElement} config.tabsContainer - Element to hold tab buttons\r\n     * @param {HTMLElement} config.contentContainer - Element to hold iframe content\r\n     * @param {Array<{id: string, title: string, url: string}>} config.presetTabs - Initial tabs to create\r\n     * @param {string} config.storageKey - LocalStorage key for tab state\r\n     * @param {string} config.defaultTab - Tab to activate if no previous state exists\r\n     * @param {boolean} config.allowClose - Enable UI to close tabs\r\n     * @param {number} config.maxTabs - Maximum open tabs at once\r\n     */\r\n    class SWH {\r\n        constructor(config = {}) {\r\n            // Validate required elements\r\n            if (!config.container || !(config.container instanceof HTMLElement)) {\r\n                throw new Error('SWH: container element is required');\r\n            }\r\n            if (!config.tabsContainer || !(config.tabsContainer instanceof HTMLElement)) {\r\n                throw new Error('SWH: tabsContainer element is required');\r\n            }\r\n            if (!config.contentContainer || !(config.contentContainer instanceof HTMLElement)) {\r\n                throw new Error('SWH: contentContainer element is required');\r\n            }\r\n\r\n            // Store configuration\r\n            this.config = {\r\n                container: config.container,\r\n                tabsContainer: config.tabsContainer,\r\n                contentContainer: config.contentContainer,\r\n                presetTabs: config.presetTabs || [],\r\n                storageKey: config.storageKey || 'swh-tabs',\r\n                defaultTab: config.defaultTab || null,\r\n                allowClose: config.allowClose || false,\r\n                maxTabs: config.maxTabs || Infinity\r\n            };\r\n\r\n            // Initialize internal state\r\n            this.state = {\r\n                openTabs: [],        // Array of {id, title, url, loaded}\r\n                activeTabId: null,   // Currently active tab ID\r\n                tabElements: new Map(),    // Map of tab ID to tab button element\r\n                iframeElements: new Map()  // Map of tab ID to iframe element\r\n            };\r\n\r\n            // Initialize event system\r\n            this.events = new Map();\r\n\r\n            // Initialize the instance\r\n            this.init();\r\n        }\r\n\r\n        /**\r\n         * Initialize SWH instance\r\n         */\r\n        init() {\r\n            // Try to restore state from localStorage\r\n            const restored = this.restoreState();\r\n\r\n            // If no state was restored, create preset tabs\r\n            if (!restored && this.config.presetTabs.length > 0) {\r\n                this.config.presetTabs.forEach(tab => {\r\n                    this.openTab(tab.id, tab.title, tab.url);\r\n                });\r\n\r\n                // Activate default tab if specified\r\n                if (this.config.defaultTab) {\r\n                    this.switchTab(this.config.defaultTab);\r\n                } else if (this.config.presetTabs.length > 0) {\r\n                    // Activate first tab if no default specified\r\n                    this.switchTab(this.config.presetTabs[0].id);\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Open a new tab\r\n         * @param {string} id - Unique tab identifier\r\n         * @param {string} title - Tab title to display\r\n         * @param {string} url - URL to load in iframe\r\n         * @returns {boolean} Success status\r\n         */\r\n        openTab(id, title, url) {\r\n            // Validate inputs\r\n            if (!id || typeof id !== 'string') {\r\n                console.warn('SWH: Tab ID must be a non-empty string');\r\n                return false;\r\n            }\r\n\r\n            // Check for duplicate tab ID\r\n            if (this.state.openTabs.find(tab => tab.id === id)) {\r\n                console.warn(`SWH: Tab with ID \"${id}\" already exists`);\r\n                this.switchTab(id); // Switch to existing tab\r\n                return false;\r\n            }\r\n\r\n            // Check maxTabs limit\r\n            if (this.state.openTabs.length >= this.config.maxTabs) {\r\n                console.warn(`SWH: Maximum tabs limit (${this.config.maxTabs}) reached`);\r\n                this.emit('maxTabsReached', { maxTabs: this.config.maxTabs });\r\n                return false;\r\n            }\r\n\r\n            // Create tab button\r\n            const tabButton = this.createTabButton(id, title);\r\n            \r\n            // Create iframe\r\n            const iframe = this.createIframe(id, url);\r\n\r\n            // Add to state\r\n            this.state.openTabs.push({\r\n                id: id,\r\n                title: title,\r\n                url: url,\r\n                loaded: false\r\n            });\r\n            this.state.tabElements.set(id, tabButton);\r\n            this.state.iframeElements.set(id, iframe);\r\n\r\n            // Append to DOM\r\n            this.config.tabsContainer.appendChild(tabButton);\r\n            this.config.contentContainer.appendChild(iframe);\r\n\r\n            // Persist state\r\n            this.persistState();\r\n\r\n            // Emit event\r\n            this.emit('tabOpened', { id, title, url });\r\n\r\n            return true;\r\n        }\r\n\r\n        /**\r\n         * Create a tab button element\r\n         * @param {string} id - Tab ID\r\n         * @param {string} title - Tab title\r\n         * @returns {HTMLElement} Tab button element\r\n         */\r\n        createTabButton(id, title) {\r\n            const button = document.createElement('button');\r\n            button.className = 'swh-tab';\r\n            button.setAttribute('data-swh-tab', id);\r\n            button.textContent = title;\r\n\r\n            // Add click handler to switch tabs\r\n            button.addEventListener('click', (e) => {\r\n                e.preventDefault();\r\n                this.switchTab(id);\r\n            });\r\n\r\n            // Add close button if allowed\r\n            if (this.config.allowClose) {\r\n                const closeBtn = document.createElement('span');\r\n                closeBtn.className = 'swh-tab-close';\r\n                closeBtn.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 384 512\"><!--!Font Awesome Free v6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\"/></svg>';\r\n                closeBtn.setAttribute('title', 'Close tab');\r\n                \r\n                closeBtn.addEventListener('click', (e) => {\r\n                    e.stopPropagation();\r\n                    this.closeTab(id);\r\n                });\r\n                \r\n                button.appendChild(closeBtn);\r\n            }\r\n\r\n            return button;\r\n        }\r\n\r\n        /**\r\n         * Create an iframe element\r\n         * @param {string} id - Tab ID\r\n         * @param {string} url - URL to load\r\n         * @returns {HTMLElement} Iframe element\r\n         */\r\n        createIframe(id, url) {\r\n            const iframe = document.createElement('iframe');\r\n            iframe.className = 'swh-iframe';\r\n            iframe.setAttribute('data-swh-iframe', id);\r\n            iframe.setAttribute('data-url', url);\r\n            iframe.style.display = 'none';\r\n\r\n            // Add load event handler\r\n            iframe.addEventListener('load', () => {\r\n                // Only mark as loaded if iframe actually has a src\r\n                // (empty iframes fire load event too, but we don't want to mark those as loaded)\r\n                if (iframe.getAttribute('src')) {\r\n                    const tab = this.state.openTabs.find(t => t.id === id);\r\n                    if (tab) {\r\n                        tab.loaded = true;\r\n                        this.emit('tabLoaded', { id });\r\n                    }\r\n                }\r\n            });\r\n\r\n            return iframe;\r\n        }\r\n\r\n        /**\r\n         * Switch to a specific tab\r\n         * @param {string} id - Tab ID to switch to\r\n         * @returns {boolean} Success status\r\n         */\r\n        switchTab(id) {\r\n            const tab = this.state.openTabs.find(t => t.id === id);\r\n            if (!tab) {\r\n                console.warn(`SWH: Tab \"${id}\" not found`);\r\n                return false;\r\n            }\r\n\r\n            const tabElement = this.state.tabElements.get(id);\r\n            const iframeElement = this.state.iframeElements.get(id);\r\n\r\n            if (!tabElement || !iframeElement) {\r\n                console.error(`SWH: Elements for tab \"${id}\" not found`);\r\n                return false;\r\n            }\r\n\r\n            // Deactivate current active tab\r\n            if (this.state.activeTabId) {\r\n                const currentTabElement = this.state.tabElements.get(this.state.activeTabId);\r\n                const currentIframeElement = this.state.iframeElements.get(this.state.activeTabId);\r\n                \r\n                if (currentTabElement) {\r\n                    currentTabElement.classList.remove('active');\r\n                }\r\n                if (currentIframeElement) {\r\n                    currentIframeElement.style.display = 'none';\r\n                }\r\n            }\r\n\r\n            // Activate target tab\r\n            tabElement.classList.add('active');\r\n            iframeElement.style.display = 'block';\r\n\r\n            // Lazy load: set src only on first activation\r\n            // Use getAttribute to check if src attribute is actually set (not the resolved URL)\r\n            if (!tab.loaded && !iframeElement.getAttribute('src')) {\r\n                iframeElement.src = tab.url;\r\n            }\r\n\r\n            // Update state\r\n            this.state.activeTabId = id;\r\n\r\n            // Persist state\r\n            this.persistState();\r\n\r\n            // Emit event\r\n            this.emit('tabSwitched', { id, tab });\r\n\r\n            return true;\r\n        }\r\n\r\n        /**\r\n         * Close a specific tab\r\n         * @param {string} id - Tab ID to close\r\n         * @returns {boolean} Success status\r\n         */\r\n        closeTab(id) {\r\n            // Prevent closing if only one tab remains\r\n            if (this.state.openTabs.length <= 1) {\r\n                console.warn('SWH: Cannot close the last remaining tab');\r\n                return false;\r\n            }\r\n\r\n            const tabIndex = this.state.openTabs.findIndex(t => t.id === id);\r\n            if (tabIndex === -1) {\r\n                console.warn(`SWH: Tab \"${id}\" not found`);\r\n                return false;\r\n            }\r\n\r\n            const tabElement = this.state.tabElements.get(id);\r\n            const iframeElement = this.state.iframeElements.get(id);\r\n\r\n            // Remove from DOM\r\n            if (tabElement && tabElement.parentNode) {\r\n                tabElement.parentNode.removeChild(tabElement);\r\n            }\r\n            if (iframeElement && iframeElement.parentNode) {\r\n                iframeElement.parentNode.removeChild(iframeElement);\r\n            }\r\n\r\n            // Remove from state\r\n            this.state.openTabs.splice(tabIndex, 1);\r\n            this.state.tabElements.delete(id);\r\n            this.state.iframeElements.delete(id);\r\n\r\n            // If closing active tab, switch to adjacent tab\r\n            if (this.state.activeTabId === id) {\r\n                const newIndex = Math.max(0, tabIndex - 1);\r\n                const newTab = this.state.openTabs[newIndex];\r\n                if (newTab) {\r\n                    this.switchTab(newTab.id);\r\n                }\r\n            }\r\n\r\n            // Persist state\r\n            this.persistState();\r\n\r\n            // Emit event\r\n            this.emit('tabClosed', { id });\r\n\r\n            return true;\r\n        }\r\n\r\n        /**\r\n         * Reload a specific tab's iframe\r\n         * @param {string} id - Tab ID to reload\r\n         * @returns {boolean} Success status\r\n         */\r\n        reloadTab(id) {\r\n            const tab = this.state.openTabs.find(t => t.id === id);\r\n            const iframeElement = this.state.iframeElements.get(id);\r\n\r\n            if (!tab || !iframeElement) {\r\n                console.warn(`SWH: Tab \"${id}\" not found`);\r\n                return false;\r\n            }\r\n\r\n            // Reset loaded state\r\n            tab.loaded = false;\r\n\r\n            // Reload iframe\r\n            if (iframeElement.src) {\r\n                iframeElement.src = iframeElement.src;\r\n            } else {\r\n                iframeElement.src = tab.url;\r\n            }\r\n\r\n            return true;\r\n        }\r\n\r\n        /**\r\n         * Get array of currently open tabs\r\n         * @returns {Array} Array of tab objects\r\n         */\r\n        getOpenTabs() {\r\n            return this.state.openTabs.map(tab => ({...tab}));\r\n        }\r\n\r\n        /**\r\n         * Get currently active tab ID\r\n         * @returns {string|null} Active tab ID\r\n         */\r\n        getActiveTab() {\r\n            return this.state.activeTabId;\r\n        }\r\n\r\n        /**\r\n         * Close all tabs and clear state\r\n         */\r\n        clearTabs() {\r\n            // Close all tabs except the first one\r\n            const tabIds = this.state.openTabs.map(t => t.id);\r\n            for (let i = tabIds.length - 1; i > 0; i--) {\r\n                this.closeTab(tabIds[i]);\r\n            }\r\n\r\n            // Clear localStorage\r\n            try {\r\n                localStorage.removeItem(this.config.storageKey);\r\n            } catch (e) {\r\n                console.warn('SWH: Failed to clear localStorage', e);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Persist current state to localStorage\r\n         */\r\n        persistState() {\r\n            try {\r\n                const state = {\r\n                    openTabs: this.state.openTabs,\r\n                    activeTabId: this.state.activeTabId\r\n                };\r\n                localStorage.setItem(this.config.storageKey, JSON.stringify(state));\r\n            } catch (e) {\r\n                console.warn('SWH: Failed to persist state to localStorage', e);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Restore state from localStorage\r\n         * @returns {boolean} Whether state was restored\r\n         */\r\n        restoreState() {\r\n            try {\r\n                const stored = localStorage.getItem(this.config.storageKey);\r\n                if (!stored) {\r\n                    return false;\r\n                }\r\n\r\n                const state = JSON.parse(stored);\r\n                if (!state || !Array.isArray(state.openTabs) || state.openTabs.length === 0) {\r\n                    return false;\r\n                }\r\n\r\n                // Recreate tabs from stored state\r\n                state.openTabs.forEach(tab => {\r\n                    this.openTab(tab.id, tab.title, tab.url);\r\n                });\r\n\r\n                // Restore active tab\r\n                if (state.activeTabId) {\r\n                    this.switchTab(state.activeTabId);\r\n                }\r\n\r\n                return true;\r\n            } catch (e) {\r\n                console.warn('SWH: Failed to restore state from localStorage', e);\r\n                return false;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Register an event listener\r\n         * @param {string} event - Event name\r\n         * @param {Function} callback - Callback function\r\n         */\r\n        on(event, callback) {\r\n            if (typeof callback !== 'function') {\r\n                console.warn('SWH: Event callback must be a function');\r\n                return;\r\n            }\r\n\r\n            if (!this.events.has(event)) {\r\n                this.events.set(event, []);\r\n            }\r\n            this.events.get(event).push(callback);\r\n        }\r\n\r\n        /**\r\n         * Unregister an event listener\r\n         * @param {string} event - Event name\r\n         * @param {Function} callback - Callback function to remove\r\n         */\r\n        off(event, callback) {\r\n            if (!this.events.has(event)) {\r\n                return;\r\n            }\r\n\r\n            const callbacks = this.events.get(event);\r\n            const index = callbacks.indexOf(callback);\r\n            if (index > -1) {\r\n                callbacks.splice(index, 1);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Emit an event\r\n         * @param {string} event - Event name\r\n         * @param {*} data - Event data\r\n         */\r\n        emit(event, data) {\r\n            if (!this.events.has(event)) {\r\n                return;\r\n            }\r\n\r\n            const callbacks = this.events.get(event);\r\n            callbacks.forEach(callback => {\r\n                try {\r\n                    callback(data);\r\n                } catch (e) {\r\n                    console.error(`SWH: Error in event handler for \"${event}\"`, e);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Auto-initialize SWH instances from HTML attributes\r\n     */\r\n    function autoInit() {\r\n        const containers = document.querySelectorAll('[data-swh]');\r\n        \r\n        containers.forEach(container => {\r\n            // Extract configuration from data attributes\r\n            const config = {\r\n                container: container,\r\n                tabsContainer: container.querySelector('[data-swh-tabs]'),\r\n                contentContainer: container.querySelector('[data-swh-content]'),\r\n                storageKey: container.getAttribute('data-swh-storage-key') || 'swh-tabs',\r\n                defaultTab: container.getAttribute('data-swh-default-tab') || null,\r\n                allowClose: container.hasAttribute('data-swh-allow-close'),\r\n                maxTabs: parseInt(container.getAttribute('data-swh-max-tabs')) || Infinity\r\n            };\r\n\r\n            // Discover preset tabs from existing markup\r\n            const presetTabs = [];\r\n            const tabButtons = container.querySelectorAll('[data-swh-tab]');\r\n            \r\n            tabButtons.forEach(button => {\r\n                const id = button.getAttribute('data-swh-tab');\r\n                const title = button.textContent.trim();\r\n                const iframe = container.querySelector(`[data-swh-iframe=\"${id}\"]`);\r\n                \r\n                if (iframe) {\r\n                    const url = iframe.getAttribute('data-url') || iframe.getAttribute('src') || '';\r\n                    presetTabs.push({ id, title, url });\r\n                    \r\n                    // Remove original elements (will be recreated by SWH)\r\n                    button.parentNode.removeChild(button);\r\n                    iframe.parentNode.removeChild(iframe);\r\n                }\r\n            });\r\n\r\n            config.presetTabs = presetTabs;\r\n\r\n            // Create SWH instance\r\n            const instance = new SWH(config);\r\n            \r\n            // Store instance on container for programmatic access\r\n            container._swhInstance = instance;\r\n        });\r\n    }\r\n\r\n    // Auto-initialize on DOM ready\r\n    if (document.readyState === 'loading') {\r\n        document.addEventListener('DOMContentLoaded', autoInit);\r\n    } else {\r\n        autoInit();\r\n    }\r\n\r\n    // Export SWH to global scope\r\n    window.SWH = SWH;\r\n\r\n})(window);\r\n"],"names":["root","factory","exports","module","define","amd","this","window","SWH","config","arguments","length","undefined","_classCallCheck","container","HTMLElement","Error","tabsContainer","contentContainer","presetTabs","storageKey","defaultTab","allowClose","maxTabs","Infinity","state","openTabs","activeTabId","tabElements","Map","iframeElements","events","init","key","value","_this","restoreState","forEach","tab","openTab","id","title","url","switchTab","find","emit","tabButton","createTabButton","iframe","createIframe","push","loaded","set","appendChild","persistState","_this2","button","document","createElement","className","setAttribute","textContent","addEventListener","e","preventDefault","closeBtn","innerHTML","stopPropagation","closeTab","_this3","style","display","getAttribute","t","tabElement","get","iframeElement","currentTabElement","currentIframeElement","classList","remove","add","src","tabIndex","findIndex","parentNode","removeChild","splice","newIndex","Math","max","newTab","map","_objectSpread","tabIds","i","localStorage","removeItem","setItem","JSON","stringify","_this4","stored","getItem","parse","Array","isArray","event","callback","has","callbacks","index","indexOf","data","autoInit","querySelectorAll","querySelector","hasAttribute","parseInt","trim","concat","instance","_swhInstance","readyState"],"sourceRoot":""}